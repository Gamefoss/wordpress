image: node:11.15.0

pipelines:
  branches:
    master:
      - step:
          name: Production Deploy
          deployment: production
          caches:
            - node
          script:
            - apt-get update
            - apt-get -qq install git-ftp ruby-full
            - cd wp-content/themes/gamefoss/src/ 
            - npm install -g gulp
            - npm install -g gulp-cli
            - npm install
            - gulp build --release
            - cd ../
            - git ftp push --all --user $SFTP_username --passwd $SFTP_password --syncroot wp-content/themes/gamefoss ftp://ftp.gamefoss.com.br/